<!doctype html>
<html>
  <head>
    <style>
      @font-face {
        font-family: 'ia-quattro-v';
        src: url('fonts/iAWriterQuattroV.ttf') format('truetype');
      }

      @font-face {
        font-family: 'ia-quattro-s';
        src: url('fonts/iAWriterQuattroS-Regular.ttf') format('truetype');
      }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JIF</title>
    <link rel=stylesheet media=screen href="jif.css">
  </head>

  <body vbox=stretch-stretch ondrop="open_file(event)">
    <textarea id=ed scale=2
      autofocus autocomplete=off
    ></textarea>

    <div id=ui-menu class=ui hbox=start-stretch></div>

    <script src="jif.js"></script>

    <script>
      uimenu([
        ['File', [
          ['New', () => console.log('new file')],
          ['New in New Window', () => console.log('new file')],
          '---',
          ['Open', () => console.log('open file')],
          ['Open in New Window', () => console.log('open file')],
          '---',
          ['Save', () => console.log('save file')],
          ['Rename…', () => console.log('rename')],
          '---',
          ['Page Setup…', () => console.log('print setup')],
        ]],
        ['Options', [
          ['Edit Config', show_config],
          ['Spell', toggle_spell],
        ]],
        '---',
        ['Cmd', [
          ['Enter Command', show_cli],
          ['View Log', show_log],
        ]],
        ['Stats', [
          ['chars'],
          ['words'],
        ]]
      ])

      $('#menu-Stats').on('mousedown', e => {
        let s = stat_calc()
        let nc = s.nchars.toLocaleString()
        let nw = s.nwords.toLocaleString()
        $('#menu-Stats-chars').innerText = nc+' Characters'
        $('#menu-Stats-words').innerText = nw+' Words'
      })

      configure(db.raw.getItem('config'))
      set_scale(db.get('scale'))
      toggle_spell(db.get('spell'))
      toggle_ui(db.get('ui'))



      // temporary
      ed.value = JIF.read('x')
      window.on('beforeunload', () =>
        JIF.autosave('x', ed.value))

    </script>
  </body>
</html>

